# [운영체제] - 프로세스 동기화

운영체제의 프로세스 관리 서비스 중 가장 중요한 두가지 스케줄링과 `동기화`

<hr>

<br>

### - 프로세스 동기화란?

```text
프로세스 사이의 수행 시기를 맞추는 것! 구체적으로 아래 2가지가 있다.

1. 실행 순서 제어 : 프로세스를 올바른 순서대로 실행하기
2. 상호 배제 : 동시에 접근해서는 안되는 자원에 하나의 프로세스만 접근시키기
```

<br>

#### 1. 실행 순서 제어

메모장에 값을 저장하는 A 프로세스와 값을 읽는 B 프로세스가 존재할 때, B 프로세스는 "메모장 안에 값이 존재한다"는 특정 조건을 만족해야 실행할 수 있다. 

따라서 A 프로세스 실행 이후 B 프로세스가 실행되어야 한다. 이렇게 동시에 실행되는 프로세스를 올바른 순서대로 실행하는 것이 프로세스 동기화(`실행 순서 제어`)이다.

#### 2. 상호 배제

예를 들어, 내 계좌 10만원에 3만원을 입금하는 A 프로세스와 7만원을 입금하는 B 프로세스가 있을 때, '계좌' 라는 `자원`을 동시에 읽어드려서 실행을 하면 결과적으로 계좌는 프로세스 실행 순서에 따라 13만원 혹은 17만원으로 변경된다.

나는 20만원을 받아야 하는데... 따라서 한 프로세스가 자원 사용을 끝내고 다음 프로세스가 자원에 접근하도록 해야한다. 이렇게 자원에 동시에 접근하지 못하게 하는 것이 `상호 배제`를 위한 프로세스 동기화 이다.

<BR>

### - 공유 자원과 임계 구역

```TEXT
공유 자원 : 전역 변수, 파일, 입출력장치 등 공통으로 이용하는 자원
임계 구역 : 공유 자원에 접근하는 코드 중 동시에 실행하면 문제가 발생하는 코드 영역
```

두 개 이상의 프로세스가 임계 구역에 진입하고자 하면 둘 중 하나는 대기해야 한다. 임계 구역에 먼저 진입한 프로세스 작업이 끝나면, 기다렸던 프로세스가 임계 구역에 진입한다. 

`레이스 컨디션` : 잘못된 실행으로 인해 여러 프로세스가 동시 다발적으로 임계 구역의 코드를 실행하여 문제가 발생하는 경우

컴퓨터는 고급 언어가 아닌 저급 언어를 실행하기 때문에 여러 줄의 저급 언어로 변환된 고급 업어 한 줄을 실행하는 과정에서 문맥 교환이 일어날 수 있다.

운영체제는 이러한 임계 구역 문제를 아래 3가지 원칙 하에 해결한다.

1. `상호 배제`: 한 프로세스가 임계 구역에 진입했다면 다른 프로세스는 임계 구역에 들어올 수 없다.
2. `진행` : 임계 구역에 어떤 프로세스도 진입하지 않았다면, 임계 구역에 진입하고자 하는 프로세스는 들어갈 수 있어야 한다.
3. `유한 대기` : 한 프로세스가 임계 구역에 진입하고 싶다면, 그 프로세스는 언젠가는 임계 구역에 들어올 수 있어야 한다(무한정 대기 X)
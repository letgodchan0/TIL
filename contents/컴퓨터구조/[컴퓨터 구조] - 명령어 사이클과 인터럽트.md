# [컴퓨터 구조] - 명령어 사이클과 인터럽트

> CPU가 하나의 명령어를 처리하는 정형화된 흐름을 '명령어 사이클'이라고 한다. 그리고 이 흐름이 끊어지는 상황을 '인터럽트' 라고 한다.

<hr>

<br>

#### - 명령어 사이클

우리가 실행하는 프로그램은 수많은 명령어로 이루어져 있고, CPU 가 이 명령어들을 하나씩 실행한다. 이 때 프로그램 속 각각의 명령어들은 일정한 주기가 반복되며 실행되는데, 이 주기를 `명령어 사이클` 이라고 한다. 

1. 명령어를 메모리에서 CPU로 가져온다. (인출 사이클)
2. CPU로 가져온 명령어를 실행한다. 제어장치가 명령어 레지스터에 담긴 값을 해석하고, 제어 신호를 발생시키는 단계 (실행 사이클)

프로그래을 이루는 수많은 명령어는 일반적으로 인출과 실행 사이클을 반복하면서 실행된다. CPU는 프로그램 속 명령어를 가져오고 실행하고, 또 가져오고 실행하고를 반복한다.

하지만, 모든 명령어가 이렇게 실행되는 것은 아니다. 예를 들어 간접 주소 지정 방식은 오퍼랜드 필드에 유효 주소를 명시하고 있기 때문에, 명령어를 인출하여 CPU로 가져왔다 하더라고 바로 실행 사이클에 돌입할 수 없다. 명령어를 실행하기 위해 메모리 접근을 한 번 더 해야 하기 때문에 이 단계를 `간접 사이클` 이라고 한다.

<br>

#### - 인터럽트

CPU가 수행 중인 작업을 방해하는 신호를 `인터럽트` 라고 한다. CPU가 작업을 잠시 중단해야 할 정도라면 인터럽트는 CPU가 꼭 주목해야할 작업이라고 생각할 수 있다.

<br>

1. 동기 인터럽트 (예외)
   - CPU에 의해 발생하는 인터럽트. 가령 CPU가 실행하는 프로그래밍 상의 오류와 같은 예외적인 상황에 마주쳤을 때 발생하는 인터럽트

2. 비동기 인터럽트 (하드웨어 인터럽트)
   - 주로 입출력 장치에 의해 발생하는 인터럽트. 키보드와 마우스와 같은 입출력 장치가 어떠한 입력을 받아들였을 때 이를 처리하기 위해 CPU에 입력 알림 (인터럽트)을 보낸다.
   - 입출력 장치는 CPU 보다 속도가 느리기 때문에 CPU는 입출력 작업의 결과를 바로 받아볼 수 없다. 만약 하드웨어 인터럽트를 사용하지 않는다면 CPU는 프린터가 언제 프린트를 끝낼지 모르기 때문에 주기적으로 프린터의 완료 여부를 확인해야 한다. 따라서 하드웨어 인터럽트를 이용하면, 알림을 받을 때까지 다른 작업을 처리할 수 있다. 

<br>

#### - 하드웨어 인터럽트 처리 용어

- 인터럽트 요청 신호 : CPU 작업을 방해하는 인터럽트에 대한 요청
- 인터럽트 플래그 : 인터럽트 요청 신호를 받아들일지 무시할지를 결정하는 비트
- 인터럽트 벡터 : 인터럽트 서비스 루틴의 시작 주소를 포함하는 인터럽트 서비스 루틴의 식별 정보
- 인터럽트 서비스 루틴 : 인터럽트를 처리하는 프로그램

<br>

```text
명령어 사이클은 하나의 명령어가 처리되는 주기로 인출, 실행, 간접, 인터럽트 사이클로 구성되어 있다.
```


# [운영체제] - 교착 상태 해결 방법

운영체제는 교착 상태를 회피할 수도, 예방할 수도, 검출 후 회복할 수도 있다!

<HR>

<BR>

### - 교착 상태 예방

교착 상태를 예방하는 방법은, 교착 상태 발생 조건 4가지 중 하나를 충족하지 못하게 하면 된다.

#### 1. 상호 배제 없애기

자원의 상호 배제를 없애면, 모든 자원을 공유 가능하게 만든다는 것과 같다. 이론적으로 교착 상태를 없앨 수 있지만, 현실적으로 모든 자원의 상호 배제를 없애기는 어렵다.

#### 2. 점유와 대기 없애보기

점유와 대기를 없애면 운영체제는 특정 프로세스에 자원을 모두 할당하거나, 아예 할당하지 않는 방식으로 배분한다. 이론적으로 교착상태를 해결할 수 있지만, 한 프로세스에 자원을 몰아주고, 그 다음에 다른 프로세스에 필요한 자원을 몰아줘야 하기 때문에 자원의 활용률이 낮아지는 단점이 있다.

또한 많은 자원을 사용하는 프로세스가 불리해지는데, 자원을 많이 사용하는 프로세스는 적게 사용하는 프로세스에 비해 동시에 자원을 사용할 타이밍을 화복하기가 어렵다. 따라서 많은 자원을 필요로 하는 프로세스가 무한정으로 기다리는 `기아 현상`을 야기할 수 있다.

#### 3. 비선점 조건 없애자!

CPU 같은 자원을 선점할 수 있다면 효과적이긴 하지만, 프린트와 같은 자원을 사용하다가 갑자기 다른 프로세스가 선점해버리면 짜증난다. 따라서 비선점 조건을 없애는 것은 범용성이 떨어진다.

#### 4. 원형 대기 조건을 없애자!

철학자를 원형 식탁이 아닌 사각형 식탁에 일렬로 앉도록 하는 느낌!

원형 대기를 없앰으로써 교착 상태를 예방하는 방식은 비교적 현실적이고 실용적이다. 하지만 모든 컴퓨터 시스템 내에 존재하는 수많은 자원에 번호를 붙이는 일은 간단한 작업도 아니고, 번호에 따라 특정 자원의 활용률이 떨어질 수 있다. 

```TEXT
결과 : 교착 상태를 예방할 수 있지만, 부작용이 따른다!
```

<BR>

### - 교착 상태 회피

교착 상태 회피 방식에서는 `교착 상태`를 한정된 자원의 무분별한 할당으로 인해 발생하는 문제로 간주한다. 따라서 프로세스에 배분할 수 있는 자원의 양을 고려하여 교착 상태가 발생하지 않을 정도의 양만큼만 자원을 배분하는 방법이 `교착 상태 회피`이다.

안전 상태 : 교착 상태가 발생하지 않고, 모든 프로세스가 정상적으로 자원을 할당받고 종료될 수 있는 상태

불안전 상태 : 교착 상태가 발생할 수도 있는 상황

안전 순서열 : 교착 상태 없이 안전하게 프로세스에 자원을 할당할 수 있는 순서를 의미

<br>

### - 교착 상태 검출 후 회복

```text
교착 상태 발생을 인정하고 사후에 조치하는 방식
```

검출 후 회복 방식에서 운영체제는 프로세스가 자원을 요구할 때마다 그때그때 모두 할당하며, 교착 상태 발생 여부를 주기적으로 검사한다. 그리고 교착 상태가 검출되면 다음과 같은 방식으로 회복한다.

#### 1. 선점을 통한 회복

교착 상태가 해결될 때까지 한 프로세스씩 자원을 몰아주는 방식으로 교착 상태가 해결될 때까지 다른 프로세스로부터 자원을 강제로 빼앗고 한 프로세스에 할당하는 방식이다.

#### 2. 프로세스 강제 종료를 통한 회복

교착 상태에 놓인 프로세스를 모두 강제 종료하거나, 교착 상태가 없어질 때까지 한 프로세스씩 강제종료하는 방식이다.

가장 단순하면서 확실한 방식이지만, 그만큼 많은 프로세스들이 작업 내열을 잃게 될 가능성이 있고 여러가지 부작용을 갖는다. 